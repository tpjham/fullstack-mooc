{"version":3,"sources":["components/Filter.js","components/Persons.js","components/PersonForm.js","services/people.js","components/Alert.js","App.js","index.js"],"names":["Filter","props","value","search","onChange","Persons","persons","name","number","onClick","deletePerson","PersonForm","onSubmit","onNameChange","onNumberChange","type","baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","Alert","message","alertStyle","className","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","searchValue","setSearchValue","showAll","setShowAll","setMessage","setAlertStyle","useEffect","pplService","namesToShow","filter","person","toLowerCase","match","event","target","preventDefault","window","confirm","find","p","changedPerson","map","setTimeout","catch","error","concat","console","log","i","key","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.8d49ba83.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst Filter = (props) => {\r\n  return (\r\n    <div>\r\n      Filter shown with <input \r\n          value={props.search}\r\n          onChange={props.onChange}\r\n        />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Filter;","import React from 'react';\r\n\r\nconst Persons = (props) => {\r\n  return (\r\n    <div>\r\n      <p>{props.persons.name}    {props.persons.number} \r\n      <button onClick={props.deletePerson}>Delete</button></p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Persons;","import React from 'react';\r\n\r\nconst PersonForm = (props) => {\r\n  return (\r\n    <div>\r\n    <div>\r\n      <h2>Add new person</h2>\r\n    </div>\r\n    <form onSubmit={props.onSubmit}>\r\n      <div> Name: <input \r\n        value={props.name}\r\n        onChange={props.onNameChange}\r\n      /></div>\r\n      <div> Number: <input\r\n        value={props.number}\r\n        onChange={props.onNumberChange}\r\n      /></div>\r\n      <div>\r\n        <button type=\"submit\">Add</button>\r\n      </div>\r\n    </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PersonForm;","import axios from \"axios\";\r\nconst baseUrl = \"/api/persons\";\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst deleteDude = (id) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nexport default {\r\n    getAll: getAll,\r\n    create: create,\r\n    update: update,\r\n    deleteDude: deleteDude\r\n}","import React from \"react\";\r\n\r\nconst Alert = ({ message, alertStyle }) => {\r\n  if (message === null && alertStyle == null) {\r\n    return (\r\n      null\r\n    )\r\n  }\r\n  \r\n  return (\r\n    <div className={alertStyle}>\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Alert;","import React, {useState, useEffect} from 'react';\r\nimport Filter from './components/Filter';\r\nimport Persons from './components/Persons';\r\nimport PersonForm from './components/PersonForm';\r\nimport pplService from \"./services/people\";\r\nimport Alert from \"./components/Alert\";\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons  ] = useState([]);\r\n  const [ newName, setNewName ] = useState(\"\");\r\n  const [ newNumber, setNewNumber ] = useState(\"\");\r\n  const [ searchValue, setSearchValue ] = useState(\"\");\r\n  const [ showAll, setShowAll ] = useState(true);\r\n  const [ message, setMessage ] = useState(null)\r\n  const [ alertStyle, setAlertStyle ] = useState(null)\r\n\r\n  useEffect(() => {\r\n    pplService\r\n      .getAll()\r\n      .then(response => {\r\n        setPersons(response)\r\n      })\r\n  }, [])\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault();\r\n    \r\n    for (const key of persons) {\r\n      if ( key.name === newName ) {\r\n        if (window.confirm(`${newName} already exists in the phonebook, would you like to replace the old number with the new one?`)) {\r\n          const person = persons.find(p => p.name === newName)\r\n          const changedPerson = {...person, number: newNumber}\r\n      \r\n          pplService\r\n            .update(person.id, changedPerson)\r\n            .then(response => {\r\n              setPersons(persons.map(person => person.name !== newName ? person : response))\r\n              setNewName(\"\");\r\n              setNewNumber(\"\");\r\n              setMessage(`Changed the number for ${newName}`)\r\n              setAlertStyle(\"notification\")\r\n              setTimeout( () => {\r\n                setMessage(null)\r\n                setAlertStyle(null)\r\n              }, 5000)\r\n            })\r\n            .catch(error => {\r\n              setMessage(\r\n                `Information of ${newName} has already been removed from the server`\r\n              )\r\n              setAlertStyle(\"error\")\r\n              setTimeout(() => {\r\n                setMessage(null)\r\n                setAlertStyle(null)\r\n              }, 5000)\r\n            })\r\n        return;\r\n        }\r\n      }\r\n    }\r\n\r\n    const personObject = {\r\n      name: newName,\r\n      number: newNumber,\r\n    }\r\n\r\n    pplService\r\n      .create(personObject)\r\n      .then(response => {\r\n        setPersons(persons.concat(response))\r\n        setNewName(\"\");\r\n        setNewNumber(\"\");\r\n        setMessage(`Added ${newName}`)\r\n        setAlertStyle(\"notification\")\r\n        setTimeout( () => {\r\n          setMessage(null)\r\n          setAlertStyle(null)\r\n        }, 5000)\r\n        console.log(response)\r\n      })\r\n      .catch(error => {\r\n        setMessage(`Validation failed: ${error.response.data.error}`)\r\n        setAlertStyle(\"error\")\r\n        setTimeout( () => {\r\n          setMessage(null)\r\n          setAlertStyle(null)\r\n        }, 5000)\r\n        console.log(error.response.data)\r\n      })\r\n  }\r\n\r\n  const namesToShow = showAll\r\n    ? persons\r\n    : persons.filter(person => person.name.toLowerCase().match(searchValue.toLowerCase()))\r\n\r\n  const handleNameChange = (event) => {\r\n    \r\n    setNewName(event.target.value);\r\n  }\r\n\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value);\r\n  }\r\n\r\n  const handleSearchChange = (event) => {\r\n    if (event.target.value === \"\") setShowAll(true);\r\n\r\n    setSearchValue(event.target.value);\r\n    setShowAll(false);\r\n  }\r\n\r\n  const deletePerson = (id) => {\r\n    const person = persons.find(p => p.id === id)\r\n\r\n\r\n    if ( window.confirm(`Do you really want to delete ${person.name} from the phonebook?` )) {\r\n      pplService\r\n      .deleteDude(id)\r\n      .then(response => {\r\n        setPersons(persons.filter(p => p.id !== id))\r\n        setMessage(`Removed \"${person.name}\" from the phonebook`)\r\n        setAlertStyle(\"error\")\r\n        setTimeout( () => {\r\n          setMessage(null)\r\n          setAlertStyle(null)\r\n        }, 5000)\r\n      })\r\n      .catch(error => {\r\n        setMessage(`The person \"${person.name}\" was already deleted from the server`)\r\n        setAlertStyle(\"error\")\r\n        setTimeout( () => {\r\n          setMessage(null)\r\n          setAlertStyle(null)\r\n        }, 5000)\r\n        setPersons(persons.filter(p => p.id !== id))\r\n      })\r\n    }\r\n  }\r\n\r\n  return (\r\n      <div>\r\n        <h2>Phonebook</h2>\r\n        <Alert message={message} alertStyle={alertStyle} />\r\n        <Filter search={searchValue} onChange={handleSearchChange}/>\r\n        <PersonForm name={newName} onNameChange={handleNameChange} number={newNumber} onNumberChange={handleNumberChange} onSubmit={addPerson} />\r\n        <h2>Numbers</h2>\r\n        {namesToShow.map((person, i) =>\r\n          <Persons key={i} persons={person}\r\n          deletePerson={() => deletePerson(person.id)} />\r\n        )}\r\n      </div>\r\n  );\r\n}\r\n\r\nexport default App;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport \"./index.css\";\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}