(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{17:function(e,n,t){e.exports=t(40)},39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),r=t(15),u=t.n(r),c=t(5),l=t(16),i=t(2),m=function(e){return o.a.createElement("div",null,"Filter shown with ",o.a.createElement("input",{value:e.search,onChange:e.onChange}))},f=function(e){return o.a.createElement("div",null,o.a.createElement("p",null,e.persons.name,"    ",e.persons.number,o.a.createElement("button",{onClick:e.deletePerson},"Delete")))},s=function(e){return o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement("h2",null,"Add new person")),o.a.createElement("form",{onSubmit:e.onSubmit},o.a.createElement("div",null," Name: ",o.a.createElement("input",{value:e.name,onChange:e.onNameChange})),o.a.createElement("div",null," Number: ",o.a.createElement("input",{value:e.number,onChange:e.onNumberChange})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"Add"))))},d=t(3),h=t.n(d),b="/api/persons",p=function(){return h.a.get(b).then((function(e){return e.data}))},v=function(e){return h.a.post(b,e).then((function(e){return e.data}))},E=function(e,n){return h.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data}))},g=function(e){return h.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}))},j=function(e){var n=e.message,t=e.alertStyle;return null===n&&null==t?null:o.a.createElement("div",{className:t},n)},O=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],r=n[1],u=Object(a.useState)(""),d=Object(i.a)(u,2),h=d[0],b=d[1],O=Object(a.useState)(""),w=Object(i.a)(O,2),y=w[0],C=w[1],S=Object(a.useState)(""),k=Object(i.a)(S,2),N=k[0],T=k[1],A=Object(a.useState)(!0),D=Object(i.a)(A,2),P=D[0],x=D[1],I=Object(a.useState)(null),J=Object(i.a)(I,2),L=J[0],B=J[1],F=Object(a.useState)(null),R=Object(i.a)(F,2),V=R[0],q=R[1];Object(a.useEffect)((function(){p().then((function(e){r(e)}))}),[]);var z=P?t:t.filter((function(e){return e.name.toLowerCase().match(N.toLowerCase())}));return o.a.createElement("div",null,o.a.createElement("h2",null,"Phonebook"),o.a.createElement(j,{message:L,alertStyle:V}),o.a.createElement(m,{search:N,onChange:function(e){""===e.target.value&&x(!0),T(e.target.value),x(!1)}}),o.a.createElement(s,{name:h,onNameChange:function(e){b(e.target.value)},number:y,onNumberChange:function(e){C(e.target.value)},onSubmit:function(e){e.preventDefault();var n,a=Object(l.a)(t);try{for(a.s();!(n=a.n()).done;){if(n.value.name===h&&window.confirm("".concat(h," already exists in the phonebook, would you like to replace the old number with the new one?"))){var o=t.find((function(e){return e.name===h})),u=Object(c.a)(Object(c.a)({},o),{},{number:y});return void E(o.id,u).then((function(e){r(t.map((function(n){return n.name!==h?n:e}))),b(""),C(""),B("Changed the number for ".concat(h)),q("notification"),setTimeout((function(){B(null),q(null)}),5e3)})).catch((function(e){B("Information of ".concat(h," has already been removed from the server")),q("error"),setTimeout((function(){B(null),q(null)}),5e3)}))}}}catch(i){a.e(i)}finally{a.f()}v({name:h,number:y}).then((function(e){r(t.concat(e)),b(""),C(""),B("Added ".concat(h)),q("notification"),setTimeout((function(){B(null),q(null)}),5e3),console.log(e)})).catch((function(e){B("Validation failed: ".concat(e.response.data.error)),q("error"),setTimeout((function(){B(null),q(null)}),5e3),console.log(e.response.data)}))}}),o.a.createElement("h2",null,"Numbers"),z.map((function(e,n){return o.a.createElement(f,{key:n,persons:e,deletePerson:function(){return function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Do you really want to delete ".concat(n.name," from the phonebook?"))&&g(e).then((function(a){r(t.filter((function(n){return n.id!==e}))),B('Removed "'.concat(n.name,'" from the phonebook')),q("error"),setTimeout((function(){B(null),q(null)}),5e3)})).catch((function(a){B('The person "'.concat(n.name,'" was already deleted from the server')),q("error"),setTimeout((function(){B(null),q(null)}),5e3),r(t.filter((function(n){return n.id!==e})))}))}(e.id)}})})))};t(39);u.a.render(o.a.createElement(O,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.8d49ba83.chunk.js.map